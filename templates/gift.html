{% extends "index.html" %}

{% block header %}
<header class="jumbotron">
	<h1 class="display-4">{{ gift.name | truncate(50) }}</h1>
	<p class="lead">{{ gift.category.name }}</p>
</header>
{% endblock %}

{% block nav %}
<ol class="breadcrumb ml-auto mb-0" style="padding:.5rem 1rem;">
	<li class="breadcrumb-item"><a href="{{ url_for('get_gifts') }}">Gifts</a></li>
    <li class="breadcrumb-item"><a href="{{ url_for('get_gifts', cat=gift.category.id) }}">{{ gift.category.name }}</a></li>
    <li class="breadcrumb-item active" aria-current="page">{{ gift.name | truncate(25) }}</li>
</ol>
{% endblock %}

{% block body %}

<section id="get">
	<div class="card mx-auto" style="width: 18rem;">
		{% if gift.picture %}
		<img class="card-img-top" src="{{ gift.picture }}" alt="Card image cap">
		{% endif %}
		<div class="card-body">
			<h5 class="card-title">{{ gift.name }}</h5>
			<p class="card-text">{{ gift.description }}</p>
			<p class="card-text"><small class="text-muted">Created on {{ gift.created_at.strftime('%d %b %Y at %H:%M') }}<br>
			Last updated on {{ gift.updated_at.strftime('%d %b %Y at %H:%M') }}</small></p>
			<a href="{{ url_for('get_claims', g_id=gift.id) }}" class="btn btn-primary">Claims</a>
		</div>
	</div>
</section>

<section id="update">
	<h2>Update the gift</h2>
	<form method="POST" action="{{ url_for('edit_gift', g_id=gift.id) }}">
		<input type='text' name='name' placeholder='name' value='{{ gift.name }}'>
    	<input type='text' name='picture' placeholder='picture url' value='{{ gift.picture }}'>
    	<textarea name='description' placeholder='Description'>{{ gift.description }}</textarea>
    	<select name="category">
    		{% for category in categories %}
    		{% if category.id == gift.category_id %}
    		<option value="{{ category.id }}" selected>{{ category.name }}</option>
    		{% else %}
    		<option value="{{ category.id }}">{{ category.name }}</option>
    		{% endif %}
    		{% endfor %}
    	</select>
        <input type='submit' value="Edit">
    </form>
</section>

<section id="delete">
	<h2>Delete the gift</h2>
	<form method="POST" action="{{ url_for('delete_gift', g_id=gift.id) }}">
    	<input type='submit' value="Delete">
    </form>
</section>

<section id="claim">
	<h2>Claim the gift</h2>
	<form method="POST" action="{{ url_for('add_claim', g_id=gift.id) }}">
		<input type='text' name='message' placeholder='message' value='{{ gift.message }}'>
		<input type='submit' value="Claim">
	</form>
</section>

<section id="back">
	<a href="{{ url_for('get_gifts') }}">Back</a>
</section>
{% endblock %}